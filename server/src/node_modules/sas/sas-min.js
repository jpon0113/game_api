/*!
 *version:0.1.19,
 *author:hezedu,
 *Released: jQuery.Released,
 *Date:2015-2-11
*/
function sas(e,t){function n(l,u,o,p){function c(r,a,s,l){s[0]===s[1]?l?(l[2][1]++,c.apply(null,l)):t.allEnd&&t.allEnd(null,e):"number"==typeof r&&n(s[1],a,s,l)}function i(e,i){if(s++,!r){switch(e){case"$STOP":return t.allEnd&&t.allEnd(i),r=!0;case"$THIS=":p&&(p[1][p[0]]=i),o[1]=o[0];break;case"$END":o[1]=o[0];break;case"$RELOAD":return u[l]=i||u[l],n.apply(null,y);default:if(o[1]++,arguments.length<2)u[l]=e;else{for(var f=[],h=0,m=arguments.length;m>h;h++)f.push(arguments[h]);u[l]=f}}t.process&&("undefined"!=typeof setImmediate?setImmediate(function(){t.process(a,s)}):setTimeout(function(){t.process(a,s)},0)),c.apply(null,y)}}if(!r){var f=Object.prototype.toString.call(u[l]).slice(8,-1);switch(f){case"Object":for(var h=Object.keys(u[l]),m=h.length,d=[m,0],g=0;m>g;g++)n(h[g],u[l],d,arguments);break;case"Array":var d=[u[l].length,0];n(d[1],u[l],d,arguments);break;case"Function":a++;var y=arguments;if(u[l].length>1){var b,v={index:l,path:[l]},E=0,k=!1;if(p)for(b=p,v.parent=p[1],v.pIndex=p[0];b;)E++,k||"number"!=typeof b[0]||(v.Sparent=b[1],k=!0),v.path.splice(0,0,b[0]),b=b[3];v.push=function(t){o[0]++,v.parent?v.parent[v.pIndex].push(t):e.push(t)},v.fspath=function(){for(var e=[],t=this.path,n=0,r=t.length;r>n;n++)"string"==typeof t[n]&&e.push(t[n]);return e},u[l](i,v)}else u[l](i);break;default:if(!t.iterator)throw new Error("SAS:类型错误:"+f+"。 任务必须是一个function。");u[l]=t.iterator(u[l]),n.apply(null,arguments)}}}t=t||{};var r=!1,a=0,s=0,l=[e.length,0];n(l[1],e,l)}"object"==typeof module&&"object"==typeof module.exports&&(module.exports=sas);