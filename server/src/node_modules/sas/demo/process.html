<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- 直接用浏览器打开。看 console. -->
<script src='../sas-debug.js'></script>
<style>
.process{width:500px;height: 20px;position: absolute; margin:auto;
  top:0;bottom: 0;left: 0;right: 0;background-color: gray;border:1px solid #000;}
.process2{width:0%;height: 20px;background-color: blue;color: #fff;line-height: 20px;}
.process3{background-color: khaki;}
</style>
</head>
<body>

  <div class ='process'>
  <div id ='process' class ='process2'></div>
  <div id ='detail' class ='process3'></div>
  </div>

  <script>



var process = document.getElementById('process');
var detail = document.getElementById('detail');

var rdom = function() {
  return Math.random() * 1000;
}

var line;

line = [1, {
    '2': [2, 3, {
      '4': 4,
      '5': 5
    }],
        '3': [2, 3, {
      '4': 4,
      '5': 5,
              '12': [2, 3, {
      '4': 4,
      '5': 5
    }]
    }],
    '6': 6,
    '7': 8
  },
  9,
  {
      '4': 4,
      '5': 5,
              '12': [2, 3, {
      '4': 4,
      '5': 5
    }]
    }
];

var processTest = function(str) {
  return function(cb, t) {
    setTimeout(function() {
      cb("OK");
    }, rdom());
  }
}


sas(line, {
  iterator: processTest,
  process:function(a,b){
      var process100 = (b/a)*100;
      process.style.width = process100+'%';
      process.innerHTML= b+' / '+a;
      detail.innerHTML=JSON.stringify(line);
  }
});
</script>
  </body>
</html>